{% load static %}
<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8" />
    <title>Прогноз погоды</title>
    <link rel="stylesheet" href="{% static 'weather/styles.css' %}" />
</head>
<body>
    <div class="form-container">
        <h1>Узнать погоду</h1>
        <form method="get" action="">
            <label for="city">Город:</label>
            <div class="input-button-wrapper">
                <div class="autocomplete-wrapper">
                    <input
                        type="text"
                        name="city"
                        id="city-input"
                        placeholder="Введите город"
                        autocomplete="off"
                        value="{{ request.GET.city|default:'' }}"
                    />
                    <ul id="suggestions"></ul>
                </div>
                <button type="submit" aria-label="Узнать погоду">
                    <!-- SVG иконка лупы -->
                    <svg xmlns="http://www.w3.org/2000/svg" height="20" width="20" fill="white" viewBox="0 0 24 24">
                        <path d="M10 18a8 8 0 1 1 5.293-2.707l4.707 4.707-1.414 1.414-4.707-4.707A7.963 7.963 0 0 1 10 18zm0-14a6 6 0 1 0 0 12 6 6 0 0 0 0-12z"/>
                    </svg>
                </button>
            </div>
        </form>

        {% if weather %}
        <div class="weather-block">
            <h2>Погода в {{ city }}</h2>
            <p>Температура: {{ weather.temperature }}°C</p>
            <p>Погода: {{ weather.weathercode|default:'—' }}</p>
            <p>Ветер: {{ weather.windspeed }} м/с</p>
        </div>
        {% elif error %}
        <div class="weather-block error-message">
            {{ error }}
        </div>
        {% endif %}
    </div>

    <script src="{% static 'weather/scripts.js' %}"></script>
</body>
</html>
